<html>
<head>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io();
  
  function send()
  {
	socket.emit("msg", "AHOJ");
  }
  
  function consoleClear()
  {
	document.getElementById("console").innerHTML = "";
  }
  
  socket.on('msg', function(msg){
  
	var div = document.getElementById("console");
	//var br = document.createElement("br");
	var content = document.createTextNode(msg + "\n");
	div.appendChild(content);
	//div.appendChild(br);

  });
</script>

</head>
<body>

<h1>Online compiler</h1>

<form method="post" onsubmit="consoleClear()">
	<textarea name="code" rows="10" cols="80">


	#include <application.h>
	#include <usb_talk.h>
	#include <bc_led.h>
	#include <bc_button.h>

	bc_led_t led;
	bc_button_t button;

	void button_event_handler(bc_button_t *self, bc_button_event_t event)
	{
		(void) self;
		if (event == BC_BUTTON_EVENT_PRESS)
		{
			static uint16_t event_count = 0;
			bc_led_set_mode(&led, (event_count & 1) != 0 ? BC_LED_MODE_BLINK : BC_LED_MODE_OFF);
			usb_talk_publish_push_button("", &event_count);
			event_count++;
		}
	}

	void application_init(void)
	{
		usb_talk_init();

		bc_led_init(&led, BC_GPIO_LED, false, false);
		bc_led_set_mode(&led, BC_LED_MODE_BLINK);

		bc_button_init(&button, BC_GPIO_BUTTON, BC_GPIO_PULL_DOWN, false);
		bc_button_set_event_handler(&button, button_event_handler);
	}
	  

	</textarea>

	<input type="submit" value="Compile"/>
</form>

<pre id="console">

</pre>

</body>
</html>